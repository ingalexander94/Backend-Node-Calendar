(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{209:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),s=a(10),l=a(24),i=a(84),u=a(5),m="[UI] Open modal",d="[UI] Close modal",p="[UI] Start Loading",f="[UI] Finish Loading",v="[CALENDAR] Active event",b="[CALENDAR] Cleaner active",g="[CALENDAR] Cleaner events",E="[CALENDAR] Add event",h="[CALENDAR] Update event",O="[CALENDAR] Delete event",j="[CALENDAR] Load events",y="[AUTH] Finish cheking",N="[AUTH] Renew token",w="[AUTH] Login user",k="[AUTH] Logout user",x={modalOpen:!1,loading:!1},C=a(62),S={events:[],active:null},A={cheking:!0},D="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,R=Object(l.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{modalOpen:!0});case d:return Object(u.a)(Object(u.a)({},e),{},{modalOpen:!1});case p:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case f:return Object(u.a)(Object(u.a)({},e),{},{loading:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(u.a)(Object(u.a)({},e),{},{events:Object(C.a)(t.payload)});case v:return Object(u.a)(Object(u.a)({},e),{},{active:Object(u.a)({},t.payload)});case b:return Object(u.a)(Object(u.a)({},e),{},{active:null});case g:return Object(u.a)({},S);case E:return Object(u.a)(Object(u.a)({},e),{},{events:[Object(u.a)({},t.payload)].concat(Object(C.a)(e.events))});case h:return Object(u.a)(Object(u.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case O:return Object(u.a)(Object(u.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.active.id})),active:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(u.a)(Object(u.a)({},e),{},{cheking:!1});case N:return Object(u.a)({},e);case w:return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{cheking:!1});case k:return{cheking:!1};default:return e}}}),L=Object(l.e)(R,D(Object(l.a)(i.a))),T=a(37),I=a(9),U=a(42),F=function(e){var t=e.isAuthenticated,a=e.component,n=Object(U.a)(e,["isAuthenticated","component"]);return r.a.createElement(I.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(I.a,{to:"/login"})}}))},_=function(e){var t=e.isAuthenticated,a=e.component,n=Object(U.a)(e,["isAuthenticated","component"]);return r.a.createElement(I.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(I.a,{to:"/"}):r.a.createElement(a,e)}}))},H=a(13),P=a(57),G=a.n(P),V=a(38),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(H.a)(t,2),r=a[0],c=a[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},s=function(e){var t=e.target;c(Object(u.a)(Object(u.a)({},r),{},Object(V.a)({},t.name,t.value)))};return[r,s,o,c]},M=a(12),z=a.n(M),B=a(21),X="https://backend-calendar-nodejs.herokuapp.com/api",q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return"GET"===a?fetch("".concat(X,"/").concat(e)):fetch("".concat(X,"/").concat(e),{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},K=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=localStorage.getItem("token")||"";return"GET"===a?fetch("".concat(X,"/").concat(e),{method:a,headers:{"x-token":n}}):fetch("".concat(X,"/").concat(e),{method:a,headers:{"Content-type":"application/json","x-token":n},body:JSON.stringify(t)})},Q=a(43),W=a.n(Q),Y=W.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",W.a.stopTimer),e.addEventListener("mouseleave",W.a.resumeTimer)}}),Z=function(e,t){Y.fire({icon:e,title:t})},$=function(){return{type:m}},ee=function(){return{type:p}},te=function(){return{type:f}},ae=function(e){return{type:w,payload:e}},ne=function(){return{type:k}},re=function(){return{type:y}},ce=(a(97),function(){var e=J({emailLogin:"",passwordLogin:""}),t=Object(H.a)(e,3),a=t[0],n=t[1],c=t[2],o=J({nameRegister:"",emailRegister:"",passwordRegister:"",password2Register:""}),l=Object(H.a)(o,3),i=l[0],u=l[1],m=l[2],d=Object(s.b)(),p=Object(s.c)((function(e){return e})).ui,f=a.emailLogin,v=a.passwordLogin,b=i.nameRegister,g=i.emailRegister,E=i.passwordRegister,h=i.password2Register,O=function(e,t,a){return G.a.isEmail(e)?t.length<6?(Z("error","La contrase\xf1a debe tener minimo 6 caracteres"),!1):null===a||!G.a.isEmpty(a)||(Z("error","El nombre es necesario"),!1):(Z("error","Ingrese un email valido"),!1)};return r.a.createElement("div",{className:"container login-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 login-form-1"},r.a.createElement("h3",null,"Ingreso"),r.a.createElement("form",{onSubmit:function(e){var t,a;e.preventDefault(),O(f,v,null)&&(d((t=f,a=v,function(){var e=Object(B.a)(z.a.mark((function e(n){var r,c,o,s,l,i,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(ee()),e.next=3,q("auth",{email:t,password:a},"POST");case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,o=c.ok,s=c.msg,l=c.uid,i=c.name,u=c.token,o?(localStorage.setItem("token",u),localStorage.setItem("token-init-date",(new Date).getTime()),n(ae({uid:l,name:i})),n(te()),Z("success",s)):(Z("error",s),n(te()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c())}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",name:"emailLogin",id:"emailLogin",onChange:n,value:f,className:"form-control",placeholder:"Correo"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"passwordLogin",id:"passwordLogin",onChange:n,value:v,className:"form-control",placeholder:"Contrase\xf1a"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btnSubmit"},"Login"," ",p.loading&&r.a.createElement("i",{className:"fas fa-spinner fa-spin ml-2"}))))),r.a.createElement("div",{className:"col-md-6 login-form-2"},r.a.createElement("h3",null,"Registro"),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),O(g,E,b)){if(E!==h)return Z("error","Las contrase\xf1as no coinciden");d((t=b,a=g,n=E,function(){var e=Object(B.a)(z.a.mark((function e(r){var c,o,s,l,i,u,m;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(ee()),e.next=3,q("auth/new",{name:t,email:a,password:n},"POST");case 3:return c=e.sent,e.next=6,c.json();case 6:o=e.sent,s=o.ok,l=o.msg,i=o.uid,u=o.name,m=o.token,s?(localStorage.setItem("token",m),localStorage.setItem("token-init-date",(new Date).getTime()),r(ae({uid:i,name:u})),r(te()),Z("success",l)):(Z("error",l),r(te()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),m()}var t,a,n}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"nameRegister",id:"nameRegister",value:b,onChange:u,className:"form-control",placeholder:"Nombre"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",name:"emailRegister",id:"emailRegister",value:g,onChange:u,className:"form-control",placeholder:"Correo"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"passwordRegister",id:"passwordRegister",value:E,onChange:u,className:"form-control",placeholder:"Contrase\xf1a"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password2Register",id:"password2Register",value:h,onChange:u,className:"form-control",placeholder:"Repita la contrase\xf1a"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btnSubmit",value:"Crear cuenta"}))))))}),oe=a(61),se=a(17),le=a.n(se),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.start=le()(e.start).toDate(),e.end=le()(e.end).toDate(),e})),e},ue=function(){return{type:b}},me=function(e){return{type:E,payload:e}},de=function(e){return{type:j,payload:e}},pe=function(e){return{type:h,payload:e}},fe=function(){return{type:O}},ve=function(){var e=Object(s.c)((function(e){return e.auth})).name,t=Object(s.b)();return r.a.createElement("div",{className:"navbar navbar-dark bg-dark mb-4"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("img",{src:"../../logo192.png",width:"30",height:"30",className:"d-inline-block align-top mr-2",alt:"",loading:"lazy"}),e),r.a.createElement("button",{onClick:function(){t((function(e){localStorage.clear(),e(ne())})),t({type:g})},className:"btn btn-outline-warning",type:"button"},"Salir",r.a.createElement("i",{className:"fas fa-sign-out-alt ml-2"})))},be={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},ge=function(e){var t=e.event,a=t.title,n=t.user;return r.a.createElement("div",{className:"w-100 h-100 event"},r.a.createElement("strong",null,a),r.a.createElement("span",null," - ",n.name))},Ee=a(58),he=a.n(Ee),Oe=a(59),je=a.n(Oe),ye={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};he.a.setAppElement("#root");var Ne=le()().minutes(0).seconds(0).add(1,"hours"),we=Ne.clone().add(1,"hours"),ke=function(e){var t=e.initDates,a=Object(n.useState)(Ne.toDate()),c=Object(H.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(we.toDate()),u=Object(H.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!0),v=Object(H.a)(f,2),b=v[0],g=v[1],E={title:"",note:"",start:Ne.toDate(),end:we.toDate()},h=J(E),O=Object(H.a)(h,4),j=O[0],y=O[1],N=O[2],w=O[3],k=Object(s.c)((function(e){return e})),x=k.ui,C=k.calendar,S=Object(s.b)(),A=j.title,D=j.note,R=j.start,L=j.end,T=C.active;Object(n.useEffect)((function(){T?(w(T),l(T.start),p(T.end)):t.start?(w({title:"",note:"",start:t.start,end:t.end}),l(t.start),p(t.end)):(w({title:"",note:"",start:Ne.toDate(),end:we.toDate()}),l(Ne.toDate()),p(we.toDate()))}),[T,w,t]);var I=function(){S({type:d}),S(ue()),N(E),l(E.start),p(E.end)};return r.a.createElement("div",{className:"container"},r.a.createElement(he.a,{isOpen:x.modalOpen,onRequestClose:I,style:ye,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("button",{type:"button",onClick:I,className:"close"},r.a.createElement("span",null,"\xd7")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t,a,n=le()(R),r=le()(L);n.isSameOrAfter(r)?Z("warning","La fecha final debe ser posterior"):A.trim().length<=2||A.trim().length>31?g(!1):(g(!0),I(),S(T?(a=j,function(){var e=Object(B.a)(z.a.mark((function e(t){var n,r,c,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K("events/".concat(a.id),a,"PUT");case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=r.ok,o=r.msg,c?(t(pe(a)),Z("success",o)):Z("error",o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()):(t=j,function(){var e=Object(B.a)(z.a.mark((function e(a,n){var r,c,o,s,l,i,u,m;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n().auth,c=r.name,o=r.uid,e.next=4,K("events",t,"POST");case 4:return s=e.sent,e.next=7,s.json();case 7:l=e.sent,i=l.ok,u=l.msg,m=l.event,i?(t.id=m.id,t.user={_id:o,name:c},a(me(t)),Z("success",u)):Z("error",u),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}())))},className:"container"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fecha y hora inicio"),r.a.createElement(je.a,{onChange:function(e){l(e),j.start=e},value:o,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fecha y hora fin"),r.a.createElement(je.a,{onChange:function(e){p(e),j.end=e},value:m,minDate:o,className:"form-control"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Titulo y notas"),r.a.createElement("input",{type:"text",className:"form-control ".concat(!b&&"is-invalid"),placeholder:"T\xedtulo del evento",name:"title",value:A,onChange:y,autoComplete:"off",maxLength:"31"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Una descripci\xf3n corta")),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{type:"text",className:"form-control",placeholder:"Notas",rows:"2",value:D,onChange:y,name:"note"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Informaci\xf3n adicional")),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block"},C.active?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-sync-alt"}),r.a.createElement("span",null," Actualizar ")):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar"))))))},xe=(a(207),a(208),function(){var e=Object(s.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){e($())},className:"btn btn-warning rounded-circle btn-lg my-btn"},r.a.createElement("i",{className:"fas fa-plus"})))}),Ce=function(){var e=Object(s.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e(function(){var e=Object(B.a)(z.a.mark((function e(t,a){var n,r,c,o,s;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().calendar.active,e.prev=1,e.next=4,K("events/".concat(n.id),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,o=c.ok,s=c.msg,o?(t(fe()),Z("success",s)):Z("error",s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a){return e.apply(this,arguments)}}())},className:"btn btn-lg btn-danger rounded-circle my-btn-danger"},r.a.createElement("i",{className:"far fa-trash-alt"})))},Se=Object(oe.b)(le.a);le()().locale("es");var Ae=function(){var e=Object(n.useState)(localStorage.getItem("lastView")||"month"),t=Object(H.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({start:"",end:""}),l=Object(H.a)(o,2),i=l[0],u=l[1],m=Object(s.c)((function(e){return e})),d=m.calendar,p=m.ui,f=m.auth,b=d.events,g=Object(s.b)();Object(n.useEffect)((function(){g(function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n,r,c,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K("events");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=n.ok,c=n.msg,o=n.events,r?t(de(ie(o))):Z("error",c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())}),[g]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,null),r.a.createElement("div",{className:"container calendar-screen"},r.a.createElement(oe.a,{localizer:Se,events:b,startAccessor:"start",endAccessor:"end",messages:be,eventPropGetter:function(e,t,a,n){return{style:{backgroundColor:e.user._id===f.uid?"#ffc107":"#E6E6E6",border:"0px",opacity:.8,color:"black",textAlign:"left"}}},components:{event:ge},onSelectEvent:function(e){g({type:v,payload:e})},onDoubleClickEvent:function(e){g($())},onSelectSlot:function(e){var t=e.start,a=e.end;u({start:t,end:a}),d.active?g(ue()):g($())},selectable:!0,onView:function(e){c(e),localStorage.setItem("lastView",e)},view:a}),d.active&&!p.modalOpen&&r.a.createElement(Ce,null),r.a.createElement(xe,null),r.a.createElement(ke,{initDates:i})))},De=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),a=t.cheking,c=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(B.a)(z.a.mark((function e(t){var a,n,r,c,o,s;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K("auth/renew");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=n.ok,c=n.uid,o=n.name,s=n.token,r?(localStorage.setItem("token",s),localStorage.setItem("token-init-date",(new Date).getTime()),t(ae({uid:c,name:o}))):t(re()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?r.a.createElement("h1",null,"Cargando..."):r.a.createElement(T.a,null,r.a.createElement("div",null,r.a.createElement(I.d,null,r.a.createElement(_,{path:"/login",isAuthenticated:!!c,component:ce}),r.a.createElement(F,{path:"/",isAuthenticated:!!c,component:Ae}),r.a.createElement(I.a,{to:"/"}))))},Re=function(){return r.a.createElement(s.a,{store:L},r.a.createElement(De,null))};a(209);o.a.render(r.a.createElement(Re,null),document.getElementById("root"))},87:function(e,t,a){e.exports=a(211)},97:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.732a5b32.chunk.js.map